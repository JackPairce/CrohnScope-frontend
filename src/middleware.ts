import { NextRequest, NextResponse } from "next/server";

export async function middleware(req: NextRequest) {
  const url = req.nextUrl.clone();
  // log all requests
  const clientIp = req.headers.get("x-forwarded-for") || "unknown";
  console.log(
    `[${new Date().toISOString()}] ${req.method} ${req.url} - Local: ${
      clientIp === "::1" || clientIp === "127.0.0.1"
    }`
  );
  // Generated by Copilot
  if (url.pathname === "/") {
    url.pathname = "/datagen";
    return NextResponse.redirect(url);
  }

  return NextResponse.next();
}

export const config = {
  //   matchers: ["/", "/home/:path*"], // Apply middleware only to the root path and all paths starting with /home
};
