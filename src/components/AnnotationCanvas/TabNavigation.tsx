"use client";
import Image from "next/image";
import React, { useState } from "react";
import { Tab } from "./types";

// Generated by Copilot
export default function TabNavigation({
  tabs,
  selectedTab,
  setSelectedTab,
  overlayRef,
  isMarkingAllDone,
}: {
  tabs: Tab[];
  selectedTab: number;
  setSelectedTab: (index: number) => void;
  setTabs?: React.Dispatch<React.SetStateAction<Tab[]>>;
  overlayRef: React.RefObject<HTMLCanvasElement | null>;
  isMarkingAllDone: boolean;
}) {
  const [isMarkingDone, setIsMarkingDone] = useState(false);

  return (
    <nav className="tabs" role="tablist" aria-label="Features navigation">
      <div className="tab-scroll-container">
        <div className="tab-buttons">
          {tabs.map((tab, index) => {
            const isSelected = selectedTab === index;
            const isProcessing =
              tabs[selectedTab].feature_id === tab.feature_id && isMarkingDone;

            return (
              <button
                key={index}
                role="tab"
                aria-selected={isSelected}
                aria-controls={`panel-${index}`}
                className={`tab-button ${isSelected ? "active" : ""} ${
                  isProcessing ? "is-processing" : ""
                } ${tab.isDone ? "is-done" : ""}`}
                onClick={() => setSelectedTab(index)}
              >
                <span className="tab-content">
                  <span className="tab-name">{tab.name}</span>
                  {tab.isDone && (
                    <Image
                      src="/svgs/tab-done.svg"
                      alt="Feature completed"
                      width={16}
                      height={16}
                      className="done-icon"
                    />
                  )}
                </span>
              </button>
            );
          })}
        </div>
      </div>
    </nav>
  );
}
